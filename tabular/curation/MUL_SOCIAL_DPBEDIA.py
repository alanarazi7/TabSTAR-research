from tabular.datasets.manual_curation_obj import CuratedFeature, CuratedTarget
from tabular.preprocessing.objects import SupervisedTask

'''
Dataset Name: DBPedia
====
Examples: 342781
====
URL: https://www.openml.org/search?type=data&id=46686
====
Description: Wikipedia- to annotate ABOUT, the curators used a Wikipedia dump and extract biography pages using named entity recognition. They labeled pages with a gender based on the number of gendered pronouns (he vs. she vs. they) and labeled each paragraph in the page with this label for the ABOUT dimension.

DBpedia (from "DB" for "database") is a project aiming to extract structured content from the information created in Wikipedia.
This is an extract of the data (after cleaning, kernel included) that provides taxonomic, hierarchical categories ("classes") for 342,782 wikipedia articles. There are 3 levels, with 9, 70 and 219 classes respectively.
A version of this dataset is a popular baseline for NLP/text classification tasks. This version of the dataset is much tougher, especially if the L2/L3 levels are used as the targets. That is why L1 and L2 will be delted and keep only L3 for the current dataset uploaded to OpenML

This is an excellent benchmark for hierarchical multiclass/multilabel text classification.
Some example approaches are included as code snippets.

Content
DBPedia dataset with multiple levels of hierarchy/classes, as a multiclass dataset.
Original DBPedia ontology (triplets data): https://wiki.dbpedia.org/develop/datasets
Listing of the class tree/taxonomy: http://mappings.dbpedia.org/server/ontology/classes/

Acknowledgements
Thanks to the Wikimedia foundation for creating Wikipedia, DBPedia and associated open-data goodness!

Thanks to my colleagues at Sparkbeyond (https://www.sparkbeyond.com) for pointing me towards the taxonomical version of this dataset (as opposed to the classic 14 class version)

paper_url = "https://arxiv.org/pdf/1509.01626"
original_data_url = "https://www.kaggle.com/datasets/danofer/dbpedia-classes"
====
Target Variable: l3 (string, 219 distinct): ['Planet', 'FootballMatch', 'Manga', 'GolfPlayer', 'AcademicJournal', 'VideoGame', 'Stadium', 'Mollusca', 'Amphibian', 'OlympicEvent']
====
Features:

text (string, 342781 distinct): ['The 1994 Mindoro earthquake occurred on November 15 at 03:15 local time near Mindoro, the Philippines. It had a moment magnitude of 7.1. It is associated with a 35 kilometer-long ground rupture, called the Aglubang River fault. Seventy eight people were reported dead, and 7,566 houses were damaged. The earthquake generated a tsunami and landslides on the Verde Island.', 'Brendan Mikkelson (born June 22, 1987) is a Canadian ice hockey defenceman who is currently plays for Luleå HF of the Swedish Hockey League (SHL). He was a second round selection of the Mighty Ducks of Anaheim, 31st overall, at the 2005 NHL Entry Draft. He was a member of the 2007 Memorial Cup winning Vancouver Giants team, and was named a tournament all-star on defence.', "Christopher Robert Pronger (/ˈprɒŋɡər/ or /ˈprɒŋər/; born October 10, 1974) is a Canadian professional ice hockey defenceman who is currently under contract with the Arizona Coyotes of the National Hockey League (NHL). He has not played since November 2011 due to post-concussion syndrome related to three separate hits suffered during his career; he also suffers from vision impairment due to being hit in the eye(s) by the blade of another player's stick. Though not officially retired, he is not expected to play again. In October 2014, Pronger signed a contract with the NHL to assist its Player Safety Division, although he is excused from any decisions directly affecting the Coyotes, with whom he still remains under a player contract. Originally selected 2nd overall by the Hartford Whalers in the 1993 NHL Entry Draft, Pronger has played for Hartford, the St. Louis Blues, Edmonton Oilers, and Anaheim Ducks before being traded to the Philadelphia Flyers before the 2009–10 season, having also captained the Blues and Ducks during that time. He has appeared in the Stanley Cup finals with three different teams (Edmonton, Anaheim, and Philadelphia), winning the Cup with the Ducks in 2007. Pronger won the Hart Trophy as the league's most valuable player for the 1999–2000 season and was the first defenceman to win the award since Bobby Orr in 1972. Pronger was also considered one of the NHL's dirtier players and has been suspended eight times. A mainstay on Team Canada, Pronger won Olympic gold medals at Salt Lake City 2002 and Vancouver 2010 and is a member of the Triple Gold Club.", 'William Edward Bell (June 10, 1891 – June 3, 1952) was a Canadian professional ice hockey player. Bell played four seasons in the National Hockey Association and six in the National Hockey League for the Montreal Wanderers, Montreal Canadiens and Ottawa Senators. He won the Stanley Cup in 1924 with the Canadiens. Death was in 1952, and not 1959 as verified by S.I.H.R.', 'Jonathan Kenneth Corupe (born January 18, 1980) is a Canadian professional ice hockey player. He is currently playing with the Lørenskog IK in the Norwegian GET-ligaen. During the 2013–14 GET-ligaen season, Corupe scored 66 points (30 goals and 36 assists) to tie with Morten Ask for the most points scored in the GET-ligaen.', "Mirsen Tikvesa (born March 5, 1986) is a Bosnian ice hockey player who is currently playing for HK Bosna of the Bosnia and Herzegovina Hockey League. Tikvesa competed in the 2008 IIHF World Championship Division III Qualification tournament as a member of the Bosnia and Herzegovina men's national ice hockey team.", 'Ryan McDonough (born January 2, 1988 in Etobicoke, Ontario) is a Canadian professional ice hockey forward currently playing for the HC Valpellice of the Elite.A. McDonough played junior hockey in the Ontario Hockey League, spending one season with the Sudbury Wolves and three seasons with the Saginaw Spirit. He led the Spirit in points in 2005-06 with 88 points and in 2007-08 he led the team in goals with 45. Despite this, McDonough remained undrafted in the 2008 NHL Entry Draft. He turned pro in 2008 and signed with EC Red Bull Salzburg in the Austrian Hockey League. After a season with Salzburg, McDonough returned briefly to North America to attend and play hockey with the University of Western Ontario before leaving to play for EV Landshut in the second German league. After one season in the Italian league Elite.A with HC Valpellice and two seasons with the Hannover Indians back in the 2nd Bundesliga in Germany, on August 27, 2013, McDonough returned to North America yet again, signing a one-year two-way contract with the Worcester Sharks of the AHL, though before playing a game with the Sharks, he was assigned to their ECHL affiliate, the San Francisco Bulls before being released on December 10, 2014. On January 8, 2014, after being released by the Sharks, McDonough returned to Valpellice in Italy. April 16 2014 McDonough signed with Odense Bulldogs being their topscorer for the 2014-16 season. McDonough resigned with the Bulldogs for season 2015-16. Ryan Mcdonough decided to return to German hockey by signing with SC Riessersee for 2016-17.', 'John \\"Red\\" Coward (28 October 1910 – 8 February 1989), also known as Johnny Coward, was an ice hockey player who mainly played two seasons for the Richmond Hawks in the English National League (ENL). However, he is best remembered for playing for the Great Britain national ice hockey team which won the gold medal at the 1936 Winter Olympics. He is a member of the British Ice Hockey Hall of Fame.', 'Thomas Cullum Pyatt (born February 14, 1987) is a Canadian professional ice hockey centre currently playing with the Ottawa Senators of the National Hockey League (NHL). He is the son of former NHL player Nelson Pyatt and brother of retired hockey player Taylor Pyatt. He has previously played in the National League A with the Genève Servette HC, and in the NHL with the Montreal Canadiens and Tampa Bay Lightning.', "Patrick Geering (born February 12, 1990) is a Swiss professional ice hockey defenceman who currently plays for the ZSC Lions in the National League A. He participated at the 2010 IIHF World Championship as a member of the Switzerland men's national ice hockey team. Geering began his career in the youth system of the ZSC Lions. In the 2006–07 season he made his professional debut for GCK Lions in the National League B. In the following season the he continued with GCK and the Swiss U-20 national ice hockey team in the National League B. In 2008 he returned to the ZSC Lions for the 2008–09 season in the National League A was appeared in 47 games with five assists. In 2009, Geering participated in the Champions Hockey League, which he won with the ZSC Lions in the finals against Metallurg Magnitogorsk."]
wiki_name (string, 342781 distinct): ['1994_Mindoro_earthquake', 'Brendan_Mikkelson', 'Chris_Pronger', 'Billy_Bell_(ice_hockey)', 'Kenny_Corupe', 'Mirsen_Tikvesa', 'Ryan_McDonough_(ice_hockey)', 'John_Coward', 'Tom_Pyatt', 'Patrick_Geering']
word_count (numeric, 716 distinct): ['25', '33', '34', '32', '35', '37', '31', '29', '30', '43']
'''

CONTEXT = "DBPEDIA Classification"
TARGET = CuratedTarget(raw_name="l3", task_type=SupervisedTask.MULTICLASS)
COLS_TO_DROP = []
FEATURES = []